!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.zutil=t():e.zutil=t()}(global,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports=require("path")},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.readdir=function(e){return new Promise((t,n)=>{r.readdir(e,(e,i)=>{if(e)return n(e);t(i)})})},t.readFile=function(e){return i(this,void 0,void 0,(function*(){return new Promise((t,n)=>{r.readFile(e,"utf8",(e,i)=>{if(e)return n(e);t(i)})})}))},t.exists=function(e){return new Promise((t,n)=>{r.exists(e,e=>{t(e)})})},t.lstatFile=function(e){return new Promise((t,n)=>{r.lstat(e,(e,i)=>e?n(e):t(i))})},t.rmdir=function(e){return new Promise((t,n)=>{r.rmdir(e,e=>{if(e)return n(e);t()})})},t.unlink=function(e){return new Promise((t,n)=>{try{r.unlinkSync(e),t()}catch(e){n(e)}})},t.mkdir=function(e){return new Promise((t,n)=>{r.mkdir(e,e=>{!e||e&&e.code,t()})})},t.sleep=function(e){return new Promise((t,n)=>{setTimeout(()=>{t()},e)})}},function(e,t){e.exports=require("fs")},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),o=n(0),c=n(1),u=n(4),s=n(5);t.cpFile=function(e,t){return i(this,void 0,void 0,(function*(){if(u.isIgnore(e))return void console.error(`${e} is ignore!`);const n=o.resolve(o.dirname(t));(yield c.exists(e))?(yield s.mk(n),yield new Promise((n,i)=>{const o=r.createReadStream(e),c=r.createWriteStream(t);o.on("data",e=>{c.write(e)}),o.on("error",e=>{throw e}),o.on("end",e=>{c.end(),e&&e(),n()})})):console.error(`${e} doesn't exist`)}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(0),r=n(8),o=[];t.setIgnore=function(e,t){for(let n of t){const t=i.join(e,n);o.push(t)}},t.isIgnore=function(e){if(!o.length)return!1;for(const t of o)if(r.calcClosestDepth(e,t)>-1)return!0;return!1}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1);t.mk=function(e){return i(this,void 0,void 0,(function*(){if(yield o.exists(e))return!0;const t=(e=r.normalize(e)).split(r.sep);for(let e=0;e<t.length;e++){if(!t[e])continue;const n=t.slice(0,e+1).join(r.sep);(yield o.exists(n))||(yield o.mkdir(n))}}))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),c=n(7),u=n(3),s=n(5),l=n(9);t.cp=function(e,t,n){return i(this,void 0,void 0,(function*(){if(!(yield o.exists(e)))return;const i=yield o.lstatFile(e);i.isFile()?yield u.cpFile(e,t):i.isDirectory()&&(yield c.cpDir(e,t,n))}))},t.mv=function(e,t){return i(this,void 0,void 0,(function*(){if(!(yield o.exists(e)))return;(yield o.exists(t))||(yield s.mk(t));const n=yield o.lstatFile(e);let i=1;return n.isFile()?yield u.cpFile(e,t):n.isDirectory()&&(i=yield c.cpDir(e,t)),l.rm(e),i}))},t.mvTo=function(e,t){return i(this,void 0,void 0,(function*(){if(!(yield o.exists(e)))return;(yield o.exists(t))||(yield s.mk(t));const n=yield o.lstatFile(e),i=r.basename(e),f=r.resolve(t,i);let a=1;return n.isFile()?yield u.cpFile(e,f):n.isDirectory()&&(a=yield c.cpDir(e,f)),l.rm(e),a}))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1),c=n(3),u=n(4);t.cpDir=function e(t,n,s){return i(this,void 0,void 0,(function*(){let i=0;if(u.isIgnore(t))return console.error(`${t} is ignore!`),i;if(!(yield o.exists(t)))return console.error(`${t} doesn't exist!`),i;const l=yield o.readdir(t);for(const u of l){const l=r.resolve(t,u),f=r.resolve(n,u);let a=0;(yield o.lstatFile(l)).isDirectory()?a=yield e(l,f,s):(a=1,yield c.cpFile(l,f),s&&(yield s(l,f))),i+=a}return i}))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),o=n(1);function c(e){return(e=r.normalize(e)).replace(/\\$/,"")}t.normalize=c,t.calcClosestDepth=function e(t,n){t=c(t);const i=c(n);return i===t?0:-1===t.indexOf(i+"\\")?-1:1+e(r.resolve(t,".."),n)},t.getFileInfo=function(e){return i(this,void 0,void 0,(function*(){const t=yield o.lstatFile(e);let n="file",i="",c="",u="";return t.isDirectory()?(n="directory",c=r.basename(e),u=r.resolve(e,"..")):t.isFile()&&(n="file",i=r.extname(e),c=r.basename(e).replace(i,""),u=r.dirname(e)),{type:n,name:c,parent:u,ext:i}}))}},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function c(e){try{s(i.next(e))}catch(e){o(e)}}function u(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(c,u)}s((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(1);function o(e){return i(this,void 0,void 0,(function*(){if(!(yield r.exists(e)))return;if((yield r.lstatFile(e)).isFile())return void(yield r.unlink(e));const t=yield r.readdir(e);for(const n of t){const t=e+"/"+n;(yield r.lstatFile(t)).isDirectory()?yield o(t):yield r.unlink(t)}yield r.rmdir(e)}))}t.rm=o,t.clear=function(e){return i(this,void 0,void 0,(function*(){if(!(yield r.exists(e)))return;if((yield r.lstatFile(e)).isFile())return void(yield r.unlink(e));const t=yield r.readdir(e);for(const n of t){const t=e+"/"+n;(yield r.lstatFile(t)).isDirectory()?yield o(t):yield r.unlink(t)}}))}}])}));